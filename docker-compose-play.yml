version: "2"
services:
  qbittorrent:
    image: linuxserver/qbittorrent
    container_name: qbittorrent
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Shanghai # 你的时区
      - UMASK_SET=022
      - WEBUI_PORT=8081 # 将此处修改成你欲使用的 WEB 管理平台端口
    volumes:
#      - /home/qb/config:/config # 绝对路径请修改为自己的config文件夹
      - ${DOWNLOAD_DIR}:/downloads # 绝对路径请修改为自己的downloads文件夹
      - ${QB_DIR}:/qb # 绝对路径请修改为自己的downloads文件夹
    ports:
      # 要使用的映射下载端口与内部下载端口，可保持默认，安装完成后在管理页面仍然可以改成其他端口。
      - 6881:6881
      - 6881:6881/udp
      # 此处WEB UI 目标端口与内部端口务必保证相同，见问题1
      - 8081:8081
    restart: unless-stopped

  plex:
    container_name: plex
    image: linuxserver/plex:1.20.1.3252-a78fef9a9-ls116
    # network_mode: bridge
    restart: unless-stopped

    # devices:
      # - /dev/dri:/dev/dri
    environment:
      - PUID=1000 # user account id on the system
      - PGID=1000 # group id on the system
      - TZ=Asia/Shanghai
      - UMASK_SET=022
      - VERSION=docker
    ports:
      # Port listing from Plex website as of 2019-08-18.
      # https://support.plex.tv/articles/201543147-what-network-ports-do-i-need-to-allow-through-my-firewall/
      # Disabled 1900 and 5353 as of 2019-08-18.
      # Was running into some sort of conflict when trying to map them with bridge mode.
      # Something else on the NAS is using those ports -- home assistant perhaps?
      # The ports are for Plex services I don't necessarily need, so they are disabled for now.
      # - "1900:1900/udp" # (for access to the Plex DLNA Server)
      # - "5353:5353/udp" # (for older Bonjour/Avahi network discovery)

      - "32400:32400" # (for access to the Plex Media Server) [required]
      - "3005:3005" # (for controlling Plex Home Theater via Plex Companion)
      - "8324:8324" # (for controlling Plex for Roku via Plex Companion)
      - "32410:32410/udp" # (for current GDM network discovery)
      - "32412:32412/udp" # (for current GDM network discovery)
      - "32413:32413/udp" # (for current GDM network discovery)
      - "32414:32414/udp" # (for current GDM network discovery)
      - "32469:32469" # (for access to the Plex DLNA Server)
    volumes:
      # - /volume1/docker/plex/config:/config
      # - /volume1/docker/plex/transcode:/transcode # this is not strictly necessary, but I've configured Plex to use this directory for transcoding. Should make it easier to backup only the configuration and not transcoding artifacts.
      - ${DOWNLOAD_DIR}:/data/Movies:ro
      - ${DOWNLOAD_DIR}:/data/Television:ro

  kodi:
    image: linuxserver/kodi-headless
    container_name: kodi
    environment:
      # - PUID=1000
      # - PGID=1000
      - TZ=Asia/Shanghai
    ports:
      - 9091:8080
      - 9090:9090
      - 9777:9777/udp
    volumes:
      - ${DOWNLOAD_DIR}:/media
    restart: unless-stopped

  webdav:
    image: ionelmc/webdav
    container_name: webdav
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Shanghai
      - WEBDAV_USERNAME=user
      - WEBDAV_PASSWORD=pass
    ports:
      - 3082:8080
    volumes:
      - ${DOWNLOAD_DIR}:/media
    restart: unless-stopped